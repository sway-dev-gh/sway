(()=>{var e={};e.id=619,e.ids=[619],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4974:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>d,pages:()=>c,routeModule:()=>u,tree:()=>m}),a(743),a(436),a(5866);var r=a(3191),i=a(8716),s=a(7922),n=a.n(s),l=a(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let m=["",{children:["teams",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,743)),"/Users/wjc2007/Desktop/sway/web/app/teams/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,436)),"/Users/wjc2007/Desktop/sway/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/wjc2007/Desktop/sway/web/app/teams/page.tsx"],d="/teams/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/teams/page",pathname:"/teams",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:m}})},3842:(e,t,a)=>{Promise.resolve().then(a.bind(a,4189))},4189:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var r=a(326),i=a(7577),s=a(6856),n=a(6462),l=a(8328);class o{async makeRequest(e,t={}){let a=localStorage.getItem("token"),r={headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`}}},i=await fetch(`https://api.swayfiles.com${e}`,{...r,...t,headers:{...r.headers,...t.headers}});if(!i.ok)throw Error(await i.text()||`HTTP error! status: ${i.status}`);return i.json()}async getTeamOverview(){try{return await this.makeRequest("/team")}catch(e){throw console.error("Error fetching team overview:",e),e}}async inviteTeamMember({email:e,role:t,projectId:a,message:r,permissions:i}){try{return await this.makeRequest("/team/invite",{method:"POST",body:JSON.stringify({email:e,role:t||"viewer",project_id:a,message:r,permissions:i})})}catch(e){throw console.error("Error inviting team member:",e),e}}async getPendingInvitations(){try{return await this.makeRequest("/team/invitations")}catch(e){throw console.error("Error fetching pending invitations:",e),e}}async acceptInvitation(e){try{return await this.makeRequest("/team/accept-invitation",{method:"POST",body:JSON.stringify({invitation_token:e})})}catch(e){throw console.error("Error accepting invitation:",e),e}}async removeTeamMember(e){try{return await this.makeRequest(`/team/${e}`,{method:"DELETE"})}catch(e){throw console.error("Error removing team member:",e),e}}getRoleDisplayName(e){return({viewer:"Viewer",editor:"Editor",reviewer:"Reviewer"})[e]||e}getRoleDescription(e){return({viewer:"Can view projects and files",editor:"Can view and edit content",reviewer:"Can view and review content"})[e]||"Unknown role"}getRoleColor(e){return({viewer:"text-blue-400 bg-blue-900/20",editor:"text-green-400 bg-green-900/20",reviewer:"text-yellow-400 bg-yellow-900/20"})[e]||"text-gray-400 bg-gray-900/20"}getPermissionDisplayName(e){return({can_view:"View Projects",can_edit:"Edit Content",can_review:"Review Changes",can_invite:"Invite Members"})[e]||e}getDefaultPermissions(e){let t={viewer:{can_view:!0,can_edit:!1,can_review:!1,can_invite:!1},editor:{can_view:!0,can_edit:!0,can_review:!1,can_invite:!1},reviewer:{can_view:!0,can_edit:!1,can_review:!0,can_invite:!1}};return t[e]||t.viewer}formatExpirationTime(e){let t=new Date,a=new Date(e)-t,r=Math.floor(a/864e5),i=Math.floor(a%864e5/36e5);return r>0?`${r} day${r>1?"s":""} remaining`:i>0?`${i} hour${i>1?"s":""} remaining`:a>0?"Less than 1 hour remaining":"Expired"}formatDate(e){return e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Unknown"}formatRelativeTime(e){if(!e)return"Unknown";let t=new Date-new Date(e),a=Math.floor(t/6e4),r=Math.floor(t/36e5),i=Math.floor(t/864e5);return a<1?"Just now":a<60?`${a} minute${1===a?"":"s"} ago`:r<24?`${r} hour${1===r?"":"s"} ago`:i<7?`${i} day${1===i?"":"s"} ago`:this.formatDate(e)}}let m=new o;var c=a(497);let d=({member:e,onRemove:t})=>{let[a,l]=(0,i.useState)(!1),o=async()=>{try{await t(e.id),l(!1)}catch(e){console.error("Failed to remove member:",e)}};return(0,r.jsxs)(s.E.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-terminal-surface border border-terminal-border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-terminal-accent rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-terminal-text font-medium",children:(e.name||e.email).charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-terminal-text font-medium",children:e.name||"Unknown"}),r.jsx("div",{className:"text-terminal-muted text-sm",children:e.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`text-xs px-2 py-1 rounded ${m.getRoleColor(e.role)}`,children:m.getRoleDisplayName(e.role)}),r.jsx("button",{onClick:()=>l(!0),className:"text-terminal-muted hover:text-red-400 text-sm",children:"Remove"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-terminal-muted",children:"Active Projects:"}),r.jsx("span",{className:"text-terminal-text ml-1",children:e.active_projects||0})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-terminal-muted",children:"Last Active:"}),r.jsx("span",{className:"text-terminal-text ml-1",children:m.formatRelativeTime(e.last_activity_at)})]})]}),e.permissions&&(0,r.jsxs)("div",{className:"mt-3",children:[r.jsx("div",{className:"text-xs text-terminal-muted mb-2",children:"Permissions:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:Object.entries(JSON.parse(e.permissions)).map(([e,t])=>t&&r.jsx("span",{className:"text-xs bg-terminal-accent text-terminal-text px-2 py-1 rounded",children:m.getPermissionDisplayName(e)},e))})]}),r.jsx(n.M,{children:a&&r.jsx(s.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:()=>l(!1),children:(0,r.jsxs)(s.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-terminal-surface border border-terminal-border rounded-lg p-6 max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{className:"text-terminal-text font-medium mb-2",children:"Remove Team Member"}),(0,r.jsxs)("p",{className:"text-terminal-muted text-sm mb-4",children:["Are you sure you want to remove ",e.name||e.email," from your team? This action cannot be undone."]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:o,className:"bg-red-600 text-white px-4 py-2 text-sm rounded hover:bg-red-700",children:"Remove"}),r.jsx("button",{onClick:()=>l(!1),className:"border border-terminal-border text-terminal-text px-4 py-2 text-sm rounded hover:bg-terminal-accent",children:"Cancel"})]})]})})})]})},x=({onInvite:e,onCancel:t,projects:a})=>{let[n,l]=(0,i.useState)(""),[o,m]=(0,i.useState)("viewer"),[c,d]=(0,i.useState)(""),[x,u]=(0,i.useState)(""),[h,v]=(0,i.useState)(!1),p=async a=>{a.preventDefault(),v(!0);try{await e({email:n,role:o,projectId:c||null,message:x}),l(""),m("viewer"),d(""),u(""),t()}catch(e){console.error("Failed to invite member:",e)}finally{v(!1)}};return r.jsx(s.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,children:(0,r.jsxs)(s.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-terminal-surface border border-terminal-border rounded-lg p-6 max-w-md w-full mx-4",onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{className:"text-terminal-text font-medium mb-4",children:"Invite Team Member"}),(0,r.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-terminal-text text-sm mb-2",children:"Email Address"}),r.jsx("input",{type:"email",value:n,onChange:e=>l(e.target.value),className:"w-full bg-terminal-bg border border-terminal-border rounded px-3 py-2 text-terminal-text focus:outline-none focus:border-terminal-text",placeholder:"colleague@example.com",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-terminal-text text-sm mb-2",children:"Role"}),(0,r.jsxs)("select",{value:o,onChange:e=>m(e.target.value),className:"w-full bg-terminal-bg border border-terminal-border rounded px-3 py-2 text-terminal-text focus:outline-none focus:border-terminal-text",children:[r.jsx("option",{value:"viewer",children:"Viewer - Can view projects"}),r.jsx("option",{value:"editor",children:"Editor - Can view and edit"}),r.jsx("option",{value:"reviewer",children:"Reviewer - Can view and review"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-terminal-text text-sm mb-2",children:"Project (Optional)"}),(0,r.jsxs)("select",{value:c,onChange:e=>d(e.target.value),className:"w-full bg-terminal-bg border border-terminal-border rounded px-3 py-2 text-terminal-text focus:outline-none focus:border-terminal-text",children:[r.jsx("option",{value:"",children:"All projects"}),a?.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-terminal-text text-sm mb-2",children:"Message (Optional)"}),r.jsx("textarea",{value:x,onChange:e=>u(e.target.value),className:"w-full bg-terminal-bg border border-terminal-border rounded px-3 py-2 text-terminal-text focus:outline-none focus:border-terminal-text resize-none",rows:3,placeholder:"Personal message to include with the invitation..."})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[r.jsx("button",{type:"submit",disabled:h||!n,className:"bg-terminal-text text-terminal-bg px-4 py-2 text-sm rounded hover:bg-terminal-text/90 disabled:opacity-50",children:h?"Sending...":"Send Invitation"}),r.jsx("button",{type:"button",onClick:t,className:"border border-terminal-border text-terminal-text px-4 py-2 text-sm rounded hover:bg-terminal-accent",children:"Cancel"})]})]})]})})},u=({invitation:e})=>(0,r.jsxs)("div",{className:"bg-terminal-surface border border-yellow-500/50 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-terminal-text font-medium",children:e.email}),(0,r.jsxs)("div",{className:"text-terminal-muted text-sm",children:["Invited ",m.formatRelativeTime(e.created_at)]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:`text-xs px-2 py-1 rounded ${m.getRoleColor(e.role)}`,children:m.getRoleDisplayName(e.role)}),r.jsx("span",{className:"text-xs text-yellow-400 bg-yellow-900/20 px-2 py-1 rounded",children:"Pending"})]})]}),(0,r.jsxs)("div",{className:"text-xs text-terminal-muted",children:["Expires: ",m.formatExpirationTime(e.expires_at)]})]});function h(){let[e,t]=(0,i.useState)(null),[a,s]=(0,i.useState)(!0),[o,h]=(0,i.useState)(null),[v,p]=(0,i.useState)(!1),[b,g]=(0,i.useState)("members"),{showNotification:j}=(0,c.Z)(),y=async()=>{try{s(!0),h(null);let e=await m.getTeamOverview();t(e)}catch(e){h(e instanceof Error?e.message:"Failed to load team data")}finally{s(!1)}},f=async e=>{try{await m.inviteTeamMember({...e,permissions:{}}),await y(),j("team_invitation_sent","Team Invitation Sent",`Invitation sent to ${e.email} as ${m.getRoleDisplayName(e.role)}`)}catch(t){throw j("error","Invitation Failed",`Failed to send invitation to ${e.email}`),t}},w=async e=>{try{await m.removeTeamMember(e),await y(),j("team_member_removed","Member Removed","Team member has been removed successfully")}catch(e){throw j("error","Remove Failed","Failed to remove team member"),e}};return a?r.jsx(l.Z,{children:r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-terminal-muted",children:"Loading teams..."})})}):o?r.jsx(l.Z,{children:r.jsx("div",{className:"flex items-center justify-center h-full",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsxs)("div",{className:"text-red-400 mb-4",children:["Error: ",o]}),r.jsx("button",{onClick:y,className:"text-terminal-text border border-terminal-border px-4 py-2 rounded hover:bg-terminal-accent",children:"Retry"})]})})}):r.jsx(l.Z,{children:(0,r.jsxs)("div",{className:"flex-1 overflow-auto bg-terminal-bg",children:[(0,r.jsxs)("div",{className:"bg-terminal-surface border-b border-terminal-border p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-xl text-terminal-text font-medium",children:"Teams"}),r.jsx("p",{className:"text-terminal-muted text-sm mt-1",children:"Manage team members and collaborate on projects"})]}),r.jsx("button",{onClick:()=>p(!0),className:"bg-terminal-text text-terminal-bg px-4 py-2 text-sm rounded hover:bg-terminal-text/90",children:"Invite Members"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-6 mt-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-medium text-terminal-text",children:e?.stats?.total_team_members||0}),r.jsx("div",{className:"text-sm text-terminal-muted",children:"Team Members"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-medium text-terminal-text",children:e?.stats?.pending_invitations||0}),r.jsx("div",{className:"text-sm text-terminal-muted",children:"Pending Invitations"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-medium text-terminal-text",children:e?.stats?.teams_member_of||0}),r.jsx("div",{className:"text-sm text-terminal-muted",children:"Teams Joined"})]})]})]}),r.jsx("div",{className:"border-b border-terminal-border",children:r.jsx("div",{className:"flex px-6",children:[{id:"members",label:"My Team",count:e?.team?.length},{id:"invitations",label:"Pending Invitations",count:e?.pending_invitations?.length},{id:"teams",label:"Teams I'm In",count:e?.member_of_teams?.length}].map(e=>(0,r.jsxs)("button",{onClick:()=>g(e.id),className:`
                  px-4 py-3 text-sm border-b-2 transition-colors
                  ${b===e.id?"border-terminal-text text-terminal-text":"border-transparent text-terminal-muted hover:text-terminal-text"}
                `,children:[e.label,e.count>0&&r.jsx("span",{className:"ml-1 bg-terminal-accent text-terminal-text text-xs px-2 py-1 rounded",children:e.count})]},e.id))})}),(0,r.jsxs)("div",{className:"p-6",children:["members"===b&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-medium text-terminal-text mb-4",children:"Team Members"}),e?.team?.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.jsx(n.M,{children:e.team.map(e=>r.jsx(d,{member:e,onRemove:w},e.id))})}):(0,r.jsxs)("div",{className:"text-center py-12 bg-terminal-surface border border-terminal-border rounded-lg",children:[r.jsx("div",{className:"text-terminal-muted mb-4",children:"No team members yet"}),r.jsx("button",{onClick:()=>p(!0),className:"bg-terminal-text text-terminal-bg px-4 py-2 text-sm rounded hover:bg-terminal-text/90",children:"Invite Your First Member"})]})]}),"invitations"===b&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-medium text-terminal-text mb-4",children:"Pending Invitations"}),e?.pending_invitations?.length>0?r.jsx("div",{className:"space-y-3",children:e.pending_invitations.map(e=>r.jsx(u,{invitation:e},e.id))}):r.jsx("div",{className:"text-center py-12 bg-terminal-surface border border-terminal-border rounded-lg",children:r.jsx("div",{className:"text-terminal-muted",children:"No pending invitations"})})]}),"teams"===b&&(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-lg font-medium text-terminal-text mb-4",children:"Teams I'm Part Of"}),e?.member_of_teams?.length>0?r.jsx("div",{className:"space-y-3",children:e.member_of_teams.map(e=>r.jsx("div",{className:"bg-terminal-surface border border-terminal-border rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("div",{className:"text-terminal-text font-medium",children:e.team_owner_name||e.team_owner_email}),(0,r.jsxs)("div",{className:"text-terminal-muted text-sm",children:[e.team_projects," project",1!==e.team_projects?"s":""]})]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded ${m.getRoleColor(e.my_role)}`,children:m.getRoleDisplayName(e.my_role)})]})},e.team_owner_id))}):r.jsx("div",{className:"text-center py-12 bg-terminal-surface border border-terminal-border rounded-lg",children:r.jsx("div",{className:"text-terminal-muted",children:"You haven't joined any teams yet"})})]})]}),r.jsx(n.M,{children:v&&r.jsx(x,{onInvite:f,onCancel:()=>p(!1),projects:e?.projects||[]})})]})})}},497:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(7577),i=a(2830);let s=()=>{let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(0),[n,l]=(0,r.useState)(!1),[o,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=i.Z.subscribe(e=>{t(e.notifications),s(e.unreadCount)});return c(),e},[]);let c=async()=>{l(!0),m(null);try{await i.Z.getNotifications()}catch(e){m(e.message||"Failed to load notifications")}finally{l(!1)}};return{notifications:e,unreadCount:a,loading:n,error:o,loadNotifications:c,markAsRead:(e=[])=>{i.Z.markAsRead(e)},clearAll:()=>{i.Z.clearAll()},showNotification:(e,t,a,r={})=>{i.Z.createLocalNotification(e,t,a,r)},startPolling:(e=3e4)=>{i.Z.startPolling(e)},stopPolling:()=>{i.Z.stopPolling()}}}},743:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`/Users/wjc2007/Desktop/sway/web/app/teams/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,461,357,600,170,328],()=>a(4974));module.exports=r})();