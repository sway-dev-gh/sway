(()=>{var e={};e.id=626,e.ids=[626],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2403:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>u,routeModule:()=>x,tree:()=>c}),r(4687),r(436),r(5866);var s=r(3191),n=r(8716),a=r(7922),o=r.n(a),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,4687)),"/Users/wjc2007/Desktop/sway/web/app/login/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,436)),"/Users/wjc2007/Desktop/sway/web/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/wjc2007/Desktop/sway/web/app/login/page.tsx"],d="/login/page",m={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},3217:(e,t,r)=>{Promise.resolve().then(r.bind(r,1310)),Promise.resolve().then(r.bind(r,3136))},9310:(e,t,r)=>{Promise.resolve().then(r.bind(r,1442))},3267:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},1442:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(326),n=r(7577),a=r(2991),o=r(5047);function i(){let[e,t]=(0,n.useState)(""),[r,i]=(0,n.useState)(""),[l,c]=(0,n.useState)(!0),[u,d]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),[p,g]=(0,n.useState)(""),h=(0,o.useRouter)(),b=async t=>{t.preventDefault(),x(!0),g("");try{let t=l?await a.i.login(e,r):await a.i.signup(e,r,u);t.success?h.push("/"):g(t.message||"Authentication failed")}catch(e){g("Network error occurred")}finally{x(!1)}};return s.jsx("div",{className:"min-h-screen bg-terminal-bg flex items-center justify-center font-mono",children:(0,s.jsxs)("div",{className:"bg-terminal-surface border border-terminal-border p-8 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"mb-6",children:s.jsx("img",{src:"/sway-logo.svg",alt:"Sway",className:"h-12 mx-auto"})}),s.jsx("h1",{className:"text-2xl text-terminal-text font-medium mb-2",children:l?"Sign In":"Create Account"}),s.jsx("p",{className:"text-terminal-muted text-sm",children:l?"Welcome back to your workspace":"Join and start collaborating"})]}),p&&s.jsx("div",{className:"bg-red-900/20 border border-red-500/30 p-3 mb-6",children:s.jsx("p",{className:"text-red-400 text-sm",children:p})}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[!l&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm text-terminal-text mb-2",children:"Username"}),s.jsx("input",{type:"text",value:u,onChange:e=>d(e.target.value),className:"w-full bg-terminal-bg border border-terminal-border px-3 py-2 text-terminal-text placeholder-terminal-muted text-sm focus:outline-none focus:border-terminal-text",placeholder:"Enter username",required:!l})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm text-terminal-text mb-2",children:"Email"}),s.jsx("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full bg-terminal-bg border border-terminal-border px-3 py-2 text-terminal-text placeholder-terminal-muted text-sm focus:outline-none focus:border-terminal-text",placeholder:"Enter email address",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm text-terminal-text mb-2",children:"Password"}),s.jsx("input",{type:"password",value:r,onChange:e=>i(e.target.value),className:"w-full bg-terminal-bg border border-terminal-border px-3 py-2 text-terminal-text placeholder-terminal-muted text-sm focus:outline-none focus:border-terminal-text",placeholder:"Enter password",required:!0})]}),s.jsx("button",{type:"submit",disabled:m,className:"w-full bg-terminal-text text-terminal-bg py-2 px-4 text-sm hover:bg-terminal-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Please wait...":l?"Sign In":"Create Account"})]}),s.jsx("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-terminal-muted text-sm",children:[l?"Don't have an account?":"Already have an account?",s.jsx("button",{onClick:()=>c(!l),className:"text-terminal-text ml-1 hover:underline",children:l?"Sign up":"Sign in"})]})})]})})}},1310:(e,t,r)=>{"use strict";r.d(t,{AuthWrapper:()=>i});var s=r(326),n=r(3136),a=r(5047);r(7577);let o=["/login","/signup"];function i({children:e}){let{isAuthenticated:t,isLoading:r}=(0,n.a)(),i=(0,a.usePathname)(),l=o.includes(i);return r?s.jsx("div",{className:"min-h-screen bg-terminal-bg flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"inline-block w-8 h-8 border-2 border-terminal-border border-t-terminal-text rounded-full animate-spin mb-4"}),s.jsx("p",{className:"text-terminal-text text-sm font-mono",children:"Authenticating..."})]})}):t||l?t&&l?(window.location.href="/",null):s.jsx(s.Fragment,{children:e}):null}},3136:(e,t,r)=>{"use strict";r.d(t,{AuthProvider:()=>i,a:()=>l});var s=r(326),n=r(7577),a=r(2991);let o=(0,n.createContext)(void 0);function i({children:e}){let[t,r]=(0,n.useState)(null),[i,l]=(0,n.useState)(!0),c=async(e,t)=>{let s=await a.i.login(e,t);return!!s.success&&!!s.user&&(r(s.user),!0)},u=async(e,t,s)=>{let n=await a.i.signup(e,t,s);return!!n.success&&!!n.user&&(r(n.user),!0)};return s.jsx(o.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:i,login:c,signup:u,logout:()=>{a.i.logout(),r(null)}},children:e})}function l(){let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2991:(e,t,r)=>{"use strict";r.d(t,{i:()=>a});let s="http://localhost:5001",n=async()=>{try{let e=await fetch(`${s}/api/csrf-token`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();if(e.ok&&t.success&&t.csrfToken)return t.csrfToken;return console.error("Failed to get CSRF token:",t.message),null}catch(e){return console.error("Network error getting CSRF token:",e),null}},a={async login(e,t){try{let r=await n();if(!r)return{success:!1,message:"Security token required. Please refresh and try again."};let a=await fetch(`${s}/api/auth/login`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRF-Token":r},body:JSON.stringify({email:e,password:t})}),o=await a.json();if(a.ok&&o.token)return localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user)),{success:!0,user:o.user,token:o.token};return{success:!1,message:o.error||o.message||"Login failed"}}catch(e){return console.error("Login error:",e),{success:!1,message:"Network error occurred"}}},async signup(e,t,r){try{let a=await n();if(!a)return{success:!1,message:"Security token required. Please refresh and try again."};let o=await fetch(`${s}/api/auth/signup`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRF-Token":a},body:JSON.stringify({email:e,password:t,name:r})}),i=await o.json();if(o.ok&&i.token)return localStorage.setItem("token",i.token),localStorage.setItem("user",JSON.stringify(i.user)),{success:!0,user:i.user,token:i.token};return{success:!1,message:i.error||i.message||"Signup failed"}}catch(e){return console.error("Signup error:",e),{success:!1,message:"Network error occurred"}}},logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"},getToken:()=>localStorage.getItem("token"),getUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null},isAuthenticated(){return!!this.getToken()}}},436:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,metadata:()=>c});var s=r(9510),n=r(5384),a=r.n(n);r(7272);var o=r(8570);let i=(0,o.createProxy)(String.raw`/Users/wjc2007/Desktop/sway/web/contexts/AuthContext.tsx#AuthProvider`);(0,o.createProxy)(String.raw`/Users/wjc2007/Desktop/sway/web/contexts/AuthContext.tsx#useAuth`);let l=(0,o.createProxy)(String.raw`/Users/wjc2007/Desktop/sway/web/components/AuthWrapper.tsx#AuthWrapper`),c={title:"SwayFiles - Versionless Collaborative Workspace",description:"The world's first truly versionless collaborative workspace. Streamline team collaboration with powerful review workflows.",keywords:["collaboration","workspace","productivity","team","versionless"]};function u({children:e}){return s.jsx("html",{lang:"en",className:"dark",children:s.jsx("body",{className:`${a().className} bg-terminal-bg text-terminal-text antialiased`,children:s.jsx(i,{children:s.jsx("div",{className:"min-h-screen bg-terminal-bg",children:s.jsx(l,{children:e})})})})})}},4687:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`/Users/wjc2007/Desktop/sway/web/app/login/page.tsx#default`)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[276,461],()=>r(2403));module.exports=s})();