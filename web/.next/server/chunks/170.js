exports.id=170,exports.ids=[170],exports.modules={3217:(e,t,i)=>{Promise.resolve().then(i.bind(i,1310)),Promise.resolve().then(i.bind(i,3136))},3267:(e,t,i)=>{Promise.resolve().then(i.t.bind(i,2994,23)),Promise.resolve().then(i.t.bind(i,6114,23)),Promise.resolve().then(i.t.bind(i,9727,23)),Promise.resolve().then(i.t.bind(i,9671,23)),Promise.resolve().then(i.t.bind(i,1868,23)),Promise.resolve().then(i.t.bind(i,4759,23))},1310:(e,t,i)=>{"use strict";i.d(t,{AuthWrapper:()=>a});var r=i(326),n=i(3136),o=i(5047);i(7577);let s=["/login","/signup"];function a({children:e}){let{isAuthenticated:t,isLoading:i}=(0,n.a)(),a=(0,o.usePathname)(),l=s.includes(a);return i?r.jsx("div",{className:"min-h-screen bg-terminal-bg flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block w-8 h-8 border-2 border-terminal-border border-t-terminal-text rounded-full animate-spin mb-4"}),r.jsx("p",{className:"text-terminal-text text-sm font-mono",children:"Authenticating..."})]})}):t||l?t&&l?(window.location.href="/",null):r.jsx(r.Fragment,{children:e}):null}},3136:(e,t,i)=>{"use strict";i.d(t,{AuthProvider:()=>a,a:()=>l});var r=i(326),n=i(7577),o=i(2991);let s=(0,n.createContext)(void 0);function a({children:e}){let[t,i]=(0,n.useState)(null),[a,l]=(0,n.useState)(!0),c=async(e,t)=>{let r=await o.i.login(e,t);return!!r.success&&!!r.user&&(i(r.user),!0)},u=async(e,t,r)=>{let n=await o.i.signup(e,t,r);return!!n.success&&!!n.user&&(i(n.user),!0)};return r.jsx(s.Provider,{value:{user:t,isAuthenticated:!!t,isLoading:a,login:c,signup:u,logout:()=>{o.i.logout(),i(null)}},children:e})}function l(){let e=(0,n.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2991:(e,t,i)=>{"use strict";i.d(t,{i:()=>o});let r="https://api.swayfiles.com",n=async()=>{try{let e=await fetch(`${r}/api/csrf-token`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();if(e.ok&&t.success&&t.csrfToken)return t.csrfToken;return console.error("Failed to get CSRF token:",t.message),null}catch(e){return console.error("Network error getting CSRF token:",e),null}},o={async login(e,t){try{let i=await n(),o={"Content-Type":"application/json"};i&&(o["X-CSRF-Token"]=i);let s=await fetch(`${r}/api/auth/login`,{method:"POST",credentials:"include",headers:o,body:JSON.stringify({email:e,password:t})}),a=await s.json();if(s.ok&&a.token)return localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),{success:!0,user:a.user,token:a.token};return{success:!1,message:a.error||a.message||"Login failed"}}catch(e){return console.error("Login error:",e),{success:!1,message:"Network error occurred"}}},async signup(e,t,i){try{let o=await n(),s={"Content-Type":"application/json"};o&&(s["X-CSRF-Token"]=o);let a=await fetch(`${r}/api/auth/signup`,{method:"POST",credentials:"include",headers:s,body:JSON.stringify({email:e,password:t,name:i})}),l=await a.json();if(a.ok&&l.token)return localStorage.setItem("token",l.token),localStorage.setItem("user",JSON.stringify(l.user)),{success:!0,user:l.user,token:l.token};return{success:!1,message:l.error||l.message||"Signup failed"}}catch(e){return console.error("Signup error:",e),{success:!1,message:"Network error occurred"}}},logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"},getToken:()=>localStorage.getItem("token"),getUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null},isAuthenticated(){return!!this.getToken()}}},2830:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});class r{constructor(){this.listeners=new Set,this.notifications=[],this.unreadCount=0,this.pollInterval=null,this.isPolling=!1}async makeRequest(e,t={}){let i=localStorage.getItem("token"),r={headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}}},n=await fetch(`https://api.swayfiles.com${e}`,{...r,...t,headers:{...r.headers,...t.headers}});if(!n.ok)throw Error(await n.text()||`HTTP error! status: ${n.status}`);return n.json()}async getNotifications(e=null){try{let t=e?`?since=${e}`:"",i=await this.makeRequest(`/activity/notifications${t}`);if(i.success)return this.notifications=i.notifications||[],this.unreadCount=i.unread_count||0,this.notifyListeners(),i;return{notifications:[],unread_count:0}}catch(e){return console.error("Error fetching notifications:",e),{notifications:[],unread_count:0}}}async getActivityFeed(e={}){try{let{type:t="all",limit:i=20,offset:r=0,since:n,before:o}=e,s=new URLSearchParams({type:t,limit:i.toString(),offset:r.toString()});return n&&s.append("since",n),o&&s.append("before",o),await this.makeRequest(`/activity?${s.toString()}`)}catch(e){throw console.error("Error fetching activity feed:",e),e}}markAsRead(e=[]){0===e.length?(this.notifications=this.notifications.map(e=>({...e,read:!0})),this.unreadCount=0):(this.notifications=this.notifications.map(t=>e.includes(t.id)?{...t,read:!0}:t),this.unreadCount=Math.max(0,this.unreadCount-e.length)),this.notifyListeners()}clearAll(){this.notifications=[],this.unreadCount=0,this.notifyListeners()}startPolling(e=3e4){this.isPolling||(this.isPolling=!0,this.pollInterval=setInterval(()=>{this.getNotifications()},e),this.getNotifications())}stopPolling(){this.pollInterval&&(clearInterval(this.pollInterval),this.pollInterval=null),this.isPolling=!1}subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{e({notifications:this.notifications,unreadCount:this.unreadCount})})}getNotificationIcon(e){let t={project_created:"\uD83C\uDD95",project_shared:"\uD83D\uDCE4",project_updated:"\uD83D\uDCDD",project_completed:"✅",collaboration_created:"\uD83E\uDD1D",collaboration_invited:"\uD83D\uDC8C",collaboration_accepted:"✓",collaboration_ended:"\uD83D\uDC4B",review_assigned:"\uD83D\uDC41️",review_approved:"✅",review_rejected:"❌",review_changes_requested:"\uD83D\uDD04",team_invitation_sent:"\uD83D\uDCE8",team_invitation_accepted:"\uD83C\uDF89",team_member_removed:"➖",review_comment_added:"\uD83D\uDCAC",comment_reply:"↩️",file_uploaded:"\uD83D\uDCC1",file_request_created:"\uD83D\uDCCB",edit_request_created:"✏️",edit_request_approved:"✅",edit_started:"⚡",default:"\uD83D\uDCE2"};return t[e]||t.default}getNotificationColor(e){let t={project_completed:"text-green-400 bg-green-900/20",review_approved:"text-green-400 bg-green-900/20",collaboration_accepted:"text-green-400 bg-green-900/20",team_invitation_accepted:"text-green-400 bg-green-900/20",review_changes_requested:"text-yellow-400 bg-yellow-900/20",review_rejected:"text-yellow-400 bg-yellow-900/20",collaboration_ended:"text-red-400 bg-red-900/20",team_member_removed:"text-red-400 bg-red-900/20",default:"text-blue-400 bg-blue-900/20"};return t[e]||t.default}formatNotificationTime(e){if(!e)return"Unknown";let t=new Date,i=new Date(e),r=t-i,n=Math.floor(r/6e4),o=Math.floor(r/36e5),s=Math.floor(r/864e5);return n<1?"Just now":n<60?`${n}m ago`:o<24?`${o}h ago`:s<7?`${s}d ago`:i.toLocaleDateString()}getNotificationPriority(e){return["review_assigned","collaboration_invited","team_invitation_sent","edit_request_created","review_changes_requested"].includes(e)?"high":["review_approved","collaboration_accepted","team_invitation_accepted","comment_reply","review_comment_added"].includes(e)?"medium":"low"}createLocalNotification(e,t,i,r={}){let n={id:`local_${Date.now()}`,action:e,description:i,actor_name:"You",created_at:new Date().toISOString(),resource_title:t,metadata:r,read:!1,local:!0};this.notifications.unshift(n),this.unreadCount+=1,this.notifyListeners(),setTimeout(()=>{this.notifications=this.notifications.filter(e=>e.id!==n.id),this.unreadCount=Math.max(0,this.unreadCount-1),this.notifyListeners()},5e3)}async requestNotificationPermission(){return"Notification"in window?"granted"===Notification.permission?"granted":"denied"!==Notification.permission?await Notification.requestPermission():Notification.permission:"not-supported"}showBrowserNotification(e,t,i=null,r=null){if("granted"===Notification.permission){let n=new Notification(e,{body:t,icon:i||"/favicon.ico",tag:"swayfiles-notification"});return r&&(n.onclick=r),setTimeout(()=>n.close(),5e3),n}}}let n=new r},436:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u,metadata:()=>c});var r=i(9510),n=i(5384),o=i.n(n);i(7272);var s=i(8570);let a=(0,s.createProxy)(String.raw`/Users/wjc2007/Desktop/sway/web/contexts/AuthContext.tsx#AuthProvider`);(0,s.createProxy)(String.raw`/Users/wjc2007/Desktop/sway/web/contexts/AuthContext.tsx#useAuth`);let l=(0,s.createProxy)(String.raw`/Users/wjc2007/Desktop/sway/web/components/AuthWrapper.tsx#AuthWrapper`),c={title:"SwayFiles - Versionless Collaborative Workspace",description:"The world's first truly versionless collaborative workspace. Streamline team collaboration with powerful review workflows.",keywords:["collaboration","workspace","productivity","team","versionless"]};function u({children:e}){return r.jsx("html",{lang:"en",className:"dark",children:r.jsx("body",{className:`${o().className} bg-terminal-bg text-terminal-text antialiased`,children:r.jsx(a,{children:r.jsx("div",{className:"min-h-screen bg-terminal-bg",children:r.jsx(l,{children:e})})})})})}},7272:()=>{}};