"use strict";exports.id=328,exports.ids=[328],exports.modules={8328:(e,t,i)=>{i.d(t,{Z:()=>k});var s=i(326),a=i(6856),r=i(7577),l=i(434),n=i(5047),c=i(6462),o=i(3136),d=i(2830);let m=({notification:e,onMarkRead:t,onClose:i})=>{let r=d.Z.getNotificationIcon(e.action),l=d.Z.getNotificationColor(e.action),n=d.Z.formatNotificationTime(e.created_at),c=d.Z.getNotificationPriority(e.action);return s.jsx(a.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},onClick:()=>{e.read||t([e.id]),i()},className:`
        p-3 border-b border-terminal-border cursor-pointer hover:bg-terminal-accent transition-colors
        ${e.read?"":"bg-terminal-surface"}
        ${"high"===c?"border-l-2 border-l-red-500":""}
        ${"medium"===c?"border-l-2 border-l-yellow-500":""}
      `,children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`
          w-8 h-8 rounded-full flex items-center justify-center text-sm
          ${l}
        `,children:r}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:`text-sm ${e.read?"text-terminal-muted":"text-terminal-text font-medium"}`,children:e.description||`${e.actor_name} performed ${e.action}`}),!e.read&&s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0"})]}),e.resource_title&&(0,s.jsxs)("p",{className:"text-xs text-terminal-muted mt-1",children:["in ",s.jsx("span",{className:"text-terminal-text",children:e.resource_title})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("span",{className:"text-xs text-terminal-muted",children:n}),e.local&&s.jsx("span",{className:"text-xs text-yellow-400 bg-yellow-900/20 px-2 py-1 rounded",children:"Local"})]})]})]})})},x=()=>{let[e,t]=(0,r.useState)(!1),[i,l]=(0,r.useState)([]),[n,o]=(0,r.useState)(0),[x,h]=(0,r.useState)(!1),u=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=d.Z.subscribe(e=>{l(e.notifications),o(e.unreadCount)});return d.Z.startPolling(3e4),d.Z.requestNotificationPermission(),()=>{e(),d.Z.stopPolling()}},[]),(0,r.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&t(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let j=async()=>{if(!e){h(!0);try{await d.Z.getNotifications()}catch(e){console.error("Error loading notifications:",e)}finally{h(!1)}}t(!e)},f=e=>{d.Z.markAsRead(e)};return(0,s.jsxs)("div",{className:"relative",ref:u,children:[(0,s.jsxs)("button",{onClick:j,className:"relative p-2 text-terminal-muted hover:text-terminal-text transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5-5h5l-5-5m-6 10v1a3 3 0 01-6 0v-1m6-4V9a3 3 0 116 0v3.5"})}),n>0&&s.jsx(a.E.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center",children:n>99?"99+":n})]}),s.jsx(c.M,{children:e&&(0,s.jsxs)(a.E.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 mt-2 w-96 bg-terminal-bg border border-terminal-border rounded-lg shadow-lg z-50",children:[s.jsx("div",{className:"p-4 border-b border-terminal-border",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"text-terminal-text font-medium",children:["Notifications ",n>0&&`(${n})`]}),(0,s.jsxs)("div",{className:"flex space-x-2",children:[n>0&&s.jsx("button",{onClick:()=>{d.Z.markAsRead()},className:"text-xs text-terminal-muted hover:text-terminal-text",children:"Mark all read"}),i.length>0&&s.jsx("button",{onClick:()=>{d.Z.clearAll()},className:"text-xs text-terminal-muted hover:text-red-400",children:"Clear all"})]})]})}),s.jsx("div",{className:"max-h-96 overflow-y-auto",children:x?s.jsx("div",{className:"p-4 text-center text-terminal-muted",children:"Loading notifications..."}):i.length>0?s.jsx(c.M,{children:i.map(e=>s.jsx(m,{notification:e,onMarkRead:f,onClose:()=>t(!1)},e.id))}):(0,s.jsxs)("div",{className:"p-8 text-center text-terminal-muted",children:[s.jsx("div",{className:"text-3xl mb-2",children:"\uD83D\uDD14"}),s.jsx("p",{className:"text-sm",children:"No notifications yet"}),s.jsx("p",{className:"text-xs mt-1",children:"You'll see activity updates here"})]})}),i.length>0&&s.jsx("div",{className:"p-3 border-t border-terminal-border",children:s.jsx("button",{className:"w-full text-center text-xs text-terminal-muted hover:text-terminal-text",children:"View all activity"})})]})})]})};var h=i(9183),u=i(1890),j=i(1810);let f=[{name:"dashboard",href:"/",icon:"▣"},{name:"workspace",href:"/workspace",icon:"▦"},{name:"teams",href:"/teams",icon:"▩"},{name:"review",href:"/review",icon:"▨",count:3},{name:"settings",href:"/settings",icon:"▥"}];function p(){let[e,t]=(0,r.useState)(!1),i=(0,n.usePathname)(),{user:d,logout:m}=(0,o.a)();return(0,s.jsxs)(a.E.div,{initial:!1,animate:{width:e?64:280},transition:{duration:.3,ease:"easeInOut"},className:"flex flex-col bg-terminal-surface border-r border-terminal-border h-screen font-mono",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-terminal-border",children:[s.jsx(c.M,{mode:"wait",children:!e&&s.jsx(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex items-center space-x-2",children:s.jsx("img",{src:"/logo.png",alt:"Sway",className:"h-8"})})}),e&&s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("img",{src:"/logo.png",alt:"Sway",className:"h-6 w-6"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(x,{}),s.jsx("button",{onClick:()=>t(!e),className:"text-terminal-muted hover:text-terminal-text transition-colors p-1",children:e?s.jsx(h.Z,{size:16}):s.jsx(u.Z,{size:16})})]})]}),s.jsx("nav",{className:"flex-1 p-3",children:s.jsx("div",{className:"space-y-1",children:f.map((t,r)=>{let n=i===t.href||"/"!==t.href&&i.startsWith(t.href);return s.jsx(l.default,{href:t.href,children:(0,s.jsxs)(a.E.div,{className:`flex items-center text-sm transition-colors group cursor-pointer relative ${n?"text-terminal-text bg-terminal-hover":"text-terminal-muted hover:text-terminal-text hover:bg-terminal-hover"}`,children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 w-full py-3 px-4",children:[!e&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("span",{className:"text-lg",children:t.icon}),s.jsx("span",{className:"text-terminal-text capitalize",children:t.name}),t.count&&(0,s.jsxs)("span",{className:"text-terminal-muted ml-auto text-xs",children:["(",t.count,")"]})]}),e&&s.jsx("div",{className:"flex items-center justify-center w-full",children:s.jsx("span",{className:"text-lg",children:t.icon})})]}),n&&s.jsx(a.E.div,{layoutId:"activeTab",className:"absolute left-0 top-0 bottom-0 w-1 bg-terminal-text"})]})},t.name)})})}),(0,s.jsxs)("div",{className:"border-t border-terminal-border p-4",children:[s.jsx(c.M,{mode:"wait",children:!e&&(0,s.jsxs)(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"space-y-3",children:[(0,s.jsxs)("div",{className:"text-xs text-terminal-muted space-y-1",children:[s.jsx("div",{className:"text-terminal-text font-medium",children:d?.username||d?.email||"User"}),s.jsx("div",{className:"text-[10px]",children:d?.email})]}),(0,s.jsxs)("button",{onClick:m,className:"flex items-center space-x-2 w-full text-xs text-terminal-muted hover:text-terminal-text transition-colors py-2 px-2 hover:bg-terminal-hover rounded-sm",children:[s.jsx(j.Z,{size:12}),s.jsx("span",{children:"Logout"})]})]})}),e&&(0,s.jsxs)("div",{className:"flex flex-col items-center space-y-2",children:[s.jsx("div",{className:"w-2 h-2 bg-terminal-text rounded-full"}),s.jsx("button",{onClick:m,className:"text-terminal-muted hover:text-terminal-text transition-colors p-1",children:s.jsx(j.Z,{size:12})})]})]})]})}var b=i(8998),N=i(6697),v=i(6283);function y(){let[e,t]=(0,r.useState)(!1),[i,l]=(0,r.useState)("logs"),n=[{key:"logs",label:"Recent",icon:b.Z},{key:"activity",label:"Activity",icon:N.Z},{key:"output",label:"Notifications",icon:v.Z}];return(0,s.jsxs)(a.E.div,{initial:!1,animate:{width:e?64:320},transition:{duration:.3,ease:"easeInOut"},className:"flex flex-col bg-terminal-surface border-l border-terminal-border h-screen",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-terminal-border",children:[s.jsx(c.M,{mode:"wait",children:!e&&s.jsx(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex items-center space-x-2",children:s.jsx("span",{className:"text-sm text-terminal-text font-medium",children:"Activity"})})}),s.jsx("button",{onClick:()=>t(!e),className:"text-terminal-muted hover:text-terminal-text transition-colors p-1",children:e?s.jsx(u.Z,{size:16}):s.jsx(h.Z,{size:16})})]}),s.jsx(c.M,{mode:"wait",children:!e&&s.jsx(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex border-b border-terminal-border",children:n.map(e=>s.jsx("button",{onClick:()=>l(e.key),className:`flex-1 px-2 py-2 text-xs font-mono uppercase tracking-wider transition-colors ${i===e.key?"bg-terminal-accent text-terminal-text border-b border-terminal-text":"text-terminal-muted hover:text-terminal-text hover:bg-terminal-hover"}`,children:(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-1",children:[s.jsx(e.icon,{size:12}),s.jsx("span",{className:"hidden sm:inline",children:e.label})]})},e.key))})}),(0,s.jsxs)("div",{className:"flex-1 overflow-hidden",children:[s.jsx(c.M,{mode:"wait",children:!e&&(0,s.jsxs)(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"h-full p-2",children:["logs"===i&&(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-sm text-terminal-text mb-3 border-b border-terminal-border pb-2",children:"Recent Activity"}),s.jsx("div",{className:"space-y-3 max-h-full overflow-y-auto",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-terminal-muted text-sm",children:"No recent activity"})})})]}),"activity"===i&&(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-sm text-terminal-text mb-3 border-b border-terminal-border pb-2",children:"Activity Feed"}),s.jsx("div",{className:"space-y-3",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-terminal-muted text-sm",children:"No activity yet"})})})]}),"output"===i&&(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("div",{className:"text-sm text-terminal-text mb-3 border-b border-terminal-border pb-2",children:"Notifications"}),s.jsx("div",{className:"space-y-3",children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-terminal-muted text-sm",children:"No notifications"})})})]})]})}),e&&s.jsx("div",{className:"flex flex-col items-center py-4 space-y-3",children:n.map(e=>s.jsx("button",{onClick:()=>l(e.key),className:`p-2 rounded transition-colors relative ${i===e.key?"bg-terminal-accent text-terminal-text":"text-terminal-muted hover:text-terminal-text hover:bg-terminal-hover"}`,title:e.label,children:s.jsx(e.icon,{size:16})},e.key))})]}),s.jsx("div",{className:"border-t border-terminal-border p-2",children:s.jsx(c.M,{mode:"wait",children:!e&&s.jsx(a.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"text-xs font-mono text-terminal-muted text-center",children:"SYSTEM ONLINE"})})})]})}let g=({notification:e,onDismiss:t})=>{let i=d.Z.getNotificationIcon(e.action),l=d.Z.getNotificationColor(e.action),n=d.Z.getNotificationPriority(e.action);return(0,r.useEffect)(()=>{let i=setTimeout(()=>{t(e.id)},"high"===n?8e3:"medium"===n?5e3:3e3);return()=>clearTimeout(i)},[e.id,n,t]),(0,s.jsxs)(a.E.div,{layout:!0,initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-50,scale:.95,transition:{duration:.2}},className:`
        relative bg-terminal-surface border border-terminal-border rounded-lg p-4 mb-3 min-w-80 max-w-96 shadow-lg
        ${"high"===n?"border-l-4 border-l-red-500":""}
        ${"medium"===n?"border-l-4 border-l-yellow-500":""}
      `,children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:`
          w-8 h-8 rounded-full flex items-center justify-center text-sm flex-shrink-0
          ${l}
        `,children:i}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-terminal-text font-medium",children:e.description}),e.resource_title&&(0,s.jsxs)("p",{className:"text-xs text-terminal-muted mt-1",children:["in ",s.jsx("span",{className:"text-terminal-text",children:e.resource_title})]})]}),s.jsx("button",{onClick:()=>t(e.id),className:"text-terminal-muted hover:text-terminal-text ml-3 flex-shrink-0",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between mt-2",children:[s.jsx("span",{className:"text-xs text-terminal-muted",children:d.Z.formatNotificationTime(e.created_at)}),e.local&&s.jsx("span",{className:"text-xs text-yellow-400",children:"Local"})]})]})]}),s.jsx(a.E.div,{className:"absolute bottom-0 left-0 h-1 bg-terminal-text rounded-b",initial:{width:"100%"},animate:{width:"0%"},transition:{duration:"high"===n?8:"medium"===n?5:3,ease:"linear"}})]})},w=()=>{let[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{let i=d.Z.subscribe(i=>{let s=i.notifications.filter(t=>!t.read&&!e.find(e=>e.id===t.id)&&"low"!==d.Z.getNotificationPriority(t.action)&&!t.local);s.length>0&&(t(e=>[...s.slice(0,3),...e].slice(0,5)),s.forEach(e=>{"high"===d.Z.getNotificationPriority(e.action)&&d.Z.showBrowserNotification("SwayFiles Notification",e.description,null,null)}))});return()=>{i()}},[e]);let i=e=>{t(t=>t.filter(t=>t.id!==e)),d.Z.markAsRead([e])};return s.jsx("div",{className:"fixed top-4 right-4 z-50 pointer-events-none",children:s.jsx("div",{className:"pointer-events-auto",children:s.jsx(c.M,{mode:"popLayout",children:e.map(e=>s.jsx(g,{notification:e,onDismiss:i},e.id))})})})};function k({children:e}){return(0,s.jsxs)("div",{className:"flex h-screen bg-terminal-bg overflow-hidden font-mono",children:[s.jsx(p,{}),s.jsx(a.E.main,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex-1 flex flex-col overflow-hidden bg-terminal-bg",children:e}),s.jsx(y,{}),s.jsx(w,{})]})}}};