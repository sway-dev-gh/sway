(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{9892:function(e,t,r){Promise.resolve().then(r.bind(r,6374))},6374:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var s=r(7437),a=r(2265),n=r(6023),o=r(9376);function l(){let[e,t]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),[i,c]=(0,a.useState)(!0),[u,m]=(0,a.useState)(""),[d,g]=(0,a.useState)(!1),[x,h]=(0,a.useState)(""),b=(0,o.useRouter)(),p=async t=>{t.preventDefault(),g(!0),h("");try{let t=i?await n.i.login(e,r):await n.i.signup(e,r,u);t.success?b.push("/"):h(t.message||"Authentication failed")}catch(e){h("Network error occurred")}finally{g(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-terminal-bg flex items-center justify-center font-mono",children:(0,s.jsxs)("div",{className:"bg-terminal-surface border border-terminal-border p-8 w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("img",{src:"/sway-logo.svg",alt:"Sway",className:"h-12 mx-auto"})}),(0,s.jsx)("h1",{className:"text-2xl text-terminal-text font-medium mb-2",children:i?"Sign In":"Create Account"}),(0,s.jsx)("p",{className:"text-terminal-muted text-sm",children:i?"Welcome back to your workspace":"Join and start collaborating"})]}),x&&(0,s.jsx)("div",{className:"bg-red-900/20 border border-red-500/30 p-3 mb-6",children:(0,s.jsx)("p",{className:"text-red-400 text-sm",children:x})}),(0,s.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[!i&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-terminal-text mb-2",children:"Username"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),className:"w-full bg-terminal-bg border border-terminal-border px-3 py-2 text-terminal-text placeholder-terminal-muted text-sm focus:outline-none focus:border-terminal-text",placeholder:"Enter username",required:!i})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-terminal-text mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",value:e,onChange:e=>t(e.target.value),className:"w-full bg-terminal-bg border border-terminal-border px-3 py-2 text-terminal-text placeholder-terminal-muted text-sm focus:outline-none focus:border-terminal-text",placeholder:"Enter email address",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-terminal-text mb-2",children:"Password"}),(0,s.jsx)("input",{type:"password",value:r,onChange:e=>l(e.target.value),className:"w-full bg-terminal-bg border border-terminal-border px-3 py-2 text-terminal-text placeholder-terminal-muted text-sm focus:outline-none focus:border-terminal-text",placeholder:"Enter password",required:!0})]}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-terminal-text text-terminal-bg py-2 px-4 text-sm hover:bg-terminal-muted transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Please wait...":i?"Sign In":"Create Account"})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("p",{className:"text-terminal-muted text-sm",children:[i?"Don't have an account?":"Already have an account?",(0,s.jsx)("button",{onClick:()=>c(!i),className:"text-terminal-text ml-1 hover:underline",children:i?"Sign up":"Sign in"})]})})]})})}},6023:function(e,t,r){"use strict";r.d(t,{i:function(){return n}});let s="http://localhost:5001",a=async()=>{try{let e=await fetch("".concat(s,"/api/csrf-token"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();if(e.ok&&t.success&&t.csrfToken)return t.csrfToken;return console.error("Failed to get CSRF token:",t.message),null}catch(e){return console.error("Network error getting CSRF token:",e),null}},n={async login(e,t){try{let r=await a();if(!r)return{success:!1,message:"Security token required. Please refresh and try again."};let n=await fetch("".concat(s,"/api/auth/login"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRF-Token":r},body:JSON.stringify({email:e,password:t})}),o=await n.json();if(n.ok&&o.token)return localStorage.setItem("token",o.token),localStorage.setItem("user",JSON.stringify(o.user)),{success:!0,user:o.user,token:o.token};return{success:!1,message:o.error||o.message||"Login failed"}}catch(e){return console.error("Login error:",e),{success:!1,message:"Network error occurred"}}},async signup(e,t,r){try{let n=await a();if(!n)return{success:!1,message:"Security token required. Please refresh and try again."};let o=await fetch("".concat(s,"/api/auth/signup"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRF-Token":n},body:JSON.stringify({email:e,password:t,name:r})}),l=await o.json();if(o.ok&&l.token)return localStorage.setItem("token",l.token),localStorage.setItem("user",JSON.stringify(l.user)),{success:!0,user:l.user,token:l.token};return{success:!1,message:l.error||l.message||"Signup failed"}}catch(e){return console.error("Signup error:",e),{success:!1,message:"Network error occurred"}}},logout(){localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"},getToken:()=>localStorage.getItem("token"),getUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null},isAuthenticated(){return!!this.getToken()}}},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9892)}),_N_E=e.O()}]);